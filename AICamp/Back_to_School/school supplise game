<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Back to School Shopping Game</title>
<style>
  body {
    margin: 0;
    font-family: sans-serif;
    background: #f5f5f5;
  }
  #game {
    position: relative;
    width: 800px;
    height: 500px;
    margin: 20px auto;
    background: url('store-background.png') no-repeat center/cover; /* store background */
    overflow: hidden;
    border: 2px solid #333;
  }
  .character {
    position: absolute;
    width: 60px;
    height: 80px;
    user-select: none;
  }
  .item {
    position: absolute;
    width: 50px;
    height: 50px;
    user-select: none;
  }
  #characterSelect {
    text-align: center;
    margin-bottom: 10px;
  }
  #scoreboard {
    text-align: center;
    font-size: 18px;
    margin-bottom: 10px;
  }
</style>
</head>
<body>

<div id="characterSelect">
  <h2>Choose Your Character</h2>
  <button onclick="chooseCharacter('boy.png')">Boy</button>
  <button onclick="chooseCharacter('girl.png')">Girl</button>
</div>

<div id="scoreboard">Items Collected: 0</div>

<div id="game"></div>

<script>
  const game = document.getElementById("game");
  const scoreboard = document.getElementById("scoreboard");

  let character = null;
  let items = [];
  let collected = 0;

  // Available item positions (aisles)
  const itemPositions = [
    { x: 100, y: 100, img: "backpack.png" },
    { x: 300, y: 150, img: "pencil.png" },
    { x: 500, y: 200, img: "pen.png" },
    { x: 650, y: 350, img: "ruler.png" }
  ];

  function chooseCharacter(img) {
    document.getElementById("characterSelect").style.display = "none";

    character = document.createElement("img");
    character.src = img; // your character image
    character.className = "character";
    character.style.left = "20px";
    character.style.top = "20px";
    game.appendChild(character);

    // Add items to the store
    for (let pos of itemPositions) {
      const item = document.createElement("img");
      item.src = pos.img;
      item.className = "item";
      item.style.left = pos.x + "px";
      item.style.top = pos.y + "px";
      game.appendChild(item);
      items.push(item);
    }

    startGame();
  }

  function startGame() {
    let speed = 5;
    let x = 20, y = 20;

    document.addEventListener("keydown", function(e) {
      if (!character) return;
      if (e.key === "ArrowUp") y -= speed;
      if (e.key === "ArrowDown") y += speed;
      if (e.key === "ArrowLeft") x -= speed;
      if (e.key === "ArrowRight") x += speed;

      // Boundaries
      x = Math.max(0, Math.min(game.clientWidth - character.clientWidth, x));
      y = Math.max(0, Math.min(game.clientHeight - character.clientHeight, y));

      character.style.left = x + "px";
      character.style.top = y + "px";

      checkCollisions();
    });
  }

  function checkCollisions() {
    const charRect = character.getBoundingClientRect();

    items.forEach((item, index) => {
      const itemRect = item.getBoundingClientRect();
      if (!(charRect.right < itemRect.left ||
            charRect.left > itemRect.right ||
            charRect.bottom < itemRect.top ||
            charRect.top > itemRect.bottom)) {
        // Collision detected
        game.removeChild(item);
        items.splice(index, 1);
        collected++;
        scoreboard.textContent = "Items Collected: " + collected;
      }
    });
  }
</script>
</body>
</html>
